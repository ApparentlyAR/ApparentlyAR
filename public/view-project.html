<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Project - ApparentlyAR</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="global.css">
</head>
<body class="text-gray-800">

    <!-- Header imported from header.html -->
    <div id="header-container"></div>
    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
            })
            .catch(error => {
                console.error('Error loading header:', error);
            });
    </script>

    <main class="max-w-screen-xl mx-auto p-4 sm:p-6 lg:p-8">
        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3">
                <li class="inline-flex items-center">
                    <a href="teacher-dashboard.html" class="text-sm font-medium text-gray-500 hover:text-gray-700">My Project</a>
                </li>
                <li>
                    <div class="flex items-center">
                        <svg class="w-3 h-3 text-gray-400 mx-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
                        <span id="breadcrumb-project-name" class="text-sm font-medium text-gray-900">Loading...</span>
                    </div>
                </li>
            </ol>
        </nav>

        <div class="flex items-center gap-4 mb-4">
            <h2 id="project-title" class="text-4xl font-bold text-gray-900">Loading Project...</h2>
            <button id="edit-project-button" onclick="window.location.href='edit-project.html?id=' + projectId" class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                <!-- pencil icon -->
                Edit
            </button>
        </div>

        <p id="project-description" class="text-gray-600 mb-10 w-full max-w-2xl">
            Loading description...
        </p>

        <h3 class="text-2xl font-bold text-gray-900 mb-4">Data Panel</h3>
        <div class="bg-white shadow overflow-hidden sm:rounded-lg mb-8">
            <div class="data-panel-table-container">
                <table id="data-table" class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cell 1</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Column 2</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Column 3</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Column 4</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Column 5</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 1 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 1 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 1 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 1 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 1 Data E</td></tr>
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 2 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 2 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 2 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 2 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 2 Data E</td></tr>
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 3 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 3 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 3 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 3 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 3 Data E</td></tr>
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 4 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 4 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 4 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 4 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 4 Data E</td></tr>
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 5 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 5 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 5 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 5 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 5 Data E</td></tr>
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 6 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 6 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 6 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 6 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 6 Data E</td></tr>
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 7 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 7 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 7 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 7 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 7 Data E</td></tr>
                        <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 8 Data A</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 8 Data B</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 8 Data C</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 8 Data D</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Row 8 Data E</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="text-right">
            <button class="inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" onclick="window.location.href='blockly-demo.html'">
                Simulate Project
            </button>
        </div>
    </main>

    <script>
        // Function to get query parameters from the URL
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // --- Main Function to Load Project Details ---
        async function loadProjectDetails() {
            const projectId = getQueryParam('id');
            
            if (!projectId) {
                // If no ID is found, redirect to dashboard or show an error
                document.getElementById('project-title').textContent = 'Error: No Project ID Provided';
                document.getElementById('project-description').textContent = 'Please select a project from the dashboard.';
                document.getElementById('breadcrumb-project-name').textContent = 'Error';
                document.getElementById('edit-project-button').style.display = 'none'; // Hide edit button
                return;
            }

            // Update the edit button link
            document.getElementById('edit-project-button').onclick = function() { 
                window.location.href = 'edit-project.html?id=' + projectId; 
            };


            try {
                // Fetch project details from your API
                const response = await fetch(`/api/projects/${projectId}`); // Assuming an API endpoint like /api/projects/1
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error(`Project with ID ${projectId} not found.`);
                    }
                    throw new Error('Failed to fetch project details.');
                }
                const project = await response.json();

                // Populate the page with fetched data
                document.getElementById('breadcrumb-project-name').textContent = project.name;
                document.getElementById('project-title').textContent = project.name;
                document.getElementById('project-description').textContent = project.description || 'No description available for this project.';
                
                // future table here
                
            } catch (error) {
                console.error('Error loading project details:', error);
                document.getElementById('breadcrumb-project-name').textContent = 'Error';
                document.getElementById('project-title').textContent = 'Error Loading Project';
                document.getElementById('project-description').textContent = `Could not load project details. ${error.message || 'Please try again.'}`;
                document.getElementById('edit-project-button').style.display = 'none'; // Hide edit button
            }
        }

        document.addEventListener('DOMContentLoaded', loadProjectDetails);
    </script>
</body>
</html>